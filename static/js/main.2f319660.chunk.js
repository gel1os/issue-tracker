(this["webpackJsonpissue-tracker"]=this["webpackJsonpissue-tracker"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),i=n.n(s),c=n(12),a=n.n(c),r=(n(17),n(4)),o=n(2),u=n(9),l=(n(18),n(0)),d=function(e){var t=e.status,n=e.amount,s=void 0===n?0:n,i=e.children,c=Object(u.a)(e,["status","amount","children"]);return Object(l.jsxs)("div",Object(o.a)(Object(o.a)({className:"issue-column"},c),{},{children:[Object(l.jsxs)("div",{className:"issue-column_header",children:[t," (",s,")"]}),Object(l.jsx)("div",{className:"issue-column_card-wrapper",children:i})]}))},j=n(10),b=n(3),p=n(5),O=n(8),h=function(){function e(){Object(p.a)(this,e)}return Object(O.a)(e,null,[{key:"get",value:function(e){return window.localStorage.getItem(e)}},{key:"save",value:function(e,t){window.localStorage.setItem(e,t)}}]),e}(),f=new(function(){function e(t){Object(p.a)(this,e),this.storage=t}return Object(O.a)(e,[{key:"get",value:function(e){return this.storage.get(e)}},{key:"save",value:function(e,t){this.storage.save(e,t)}}]),e}())(h),v={open:"Open",pending:"Pending",closed:"Closed"},m=[v.open,v.pending,v.closed],x=function(e,t){var n;return(n={},Object(b.a)(n,v.open,[]),Object(b.a)(n,v.pending,[v.open]),Object(b.a)(n,v.closed,[v.open,v.pending]),n)[t].includes(e)},g=function e(t){var n=t.title,s=t.description,i=t.status,c=t.createdAt;Object(p.a)(this,e),this.title=n||"",this.description=s||"",this.status=i||v.open,this.createdAt=c||Date.now(),this.id=Math.floor(1e6*Math.random()+1)},w=[new g({title:"Implement add/edit of issue",description:"Need to implement creation and editing of issue",status:v.closed}),new g({title:"Implement Board view",description:"Need to implement Board view",status:v.closed}),new g({title:"Implement drag-n-drop for Board view",description:"Need to implement drag-n-drop for Board view",status:v.closed}),new g({title:"Implement List view",description:"Need to implement List view",status:v.closed}),new g({title:"Implement collapsing/expanding of sections for List view",description:"Need to implement collapsing/expanding of sections in List view",status:v.closed}),new g({title:"Implement saving of issues and current view to local storage",description:"Need to implement saving of issues and current view to local storage",status:v.closed}),new g({title:"Implement logic of issue status update according to requirements",status:v.closed}),new g({title:"Check creation and editing of issues",description:"Need to check whether creation and editing of issues works",status:v.open}),new g({title:"Check drag-n-drop in Board view",description:"Need to check whether drag-n-drop works",status:v.open}),new g({title:"Check collapse/expand of sections in List view",description:"Need to check collapse/expand of sections works",status:v.open}),new g({title:"Check saving of issues and view",description:"Need to check whether issues and view persists after page refresh",status:v.open})],N=Object(s.createContext)();N.displayName="Store";var k,y=JSON.parse(f.get("issues")),C={issues:{issues:y?y.map((function(e){return new g(e)})):w},dialog:{opened:!1,issue:null}},S=(k={issues:function(e,t){switch(t.type){case"ADD_ISSUE":var n=new g(t.payload);return{issues:[].concat(Object(j.a)(e.issues),[n])};case"EDIT_ISSUE":var s=t.payload,i=s.issue,c=s.newValues,a=new g(Object(o.a)(Object(o.a)({},i),c)),r=[];if(i.status!==a.status)(r=e.issues.filter((function(e){return e.id!==i.id}))).push(a);else{var u=e.issues.findIndex((function(e){return e.id===i.id}));r=[].concat(Object(j.a)(e.issues.slice(0,u)),[a],Object(j.a)(e.issues.slice(u+1)))}return{issues:r};default:return e}},dialog:function(e,t){switch(t.type){case"OPEN_DIALOG":return{opened:!0,issue:t.payload||null};case"CLOSE_DIALOG":return{opened:!1,issue:null};default:return e}}},function(e,t){return Object.keys(k).reduce((function(e,n){return Object(o.a)(Object(o.a)({},e),{},Object(b.a)({},n,k[n](e[n],t)))}),e)}),I=function(){return Object(s.useContext)(N)},D=function(e){var t=e.children,n=Object(s.useReducer)(S,C),i=Object(r.a)(n,2),c=i[0],a=i[1],o=Object(s.useMemo)((function(){return{state:c,dispatch:a}}),[c]);return Object(l.jsx)(N.Provider,{value:o,children:t})},_=(n(20),function(e){var t=I().dispatch,n=e.issue,s=Object(u.a)(e,["issue"]);return Object(l.jsxs)("div",Object(o.a)(Object(o.a)({},s),{},{className:"issue-card",onClick:function(){return t({type:"OPEN_DIALOG",payload:n})},children:[Object(l.jsx)("div",{className:"issue-card_title line-clamp",children:n.title}),Object(l.jsx)("div",{className:"issue-card_description line-clamp",children:n.description})]}))}),E=function(e){var t=e.onDragStart,n=e.children;return Object(l.jsx)(l.Fragment,{children:i.a.Children.map(n,(function(e){return i.a.cloneElement(e,{draggable:!0,onDragStart:t})}))})},L=function(){var e=I().state.issues.issues;return Object(s.useMemo)((function(){var t;return t={},Object(b.a)(t,v.open,e.filter((function(e){return e.status===v.open}))),Object(b.a)(t,v.pending,e.filter((function(e){return e.status===v.pending}))),Object(b.a)(t,v.closed,e.filter((function(e){return e.status===v.closed}))),Object(b.a)(t,"empty",!e.length),t}),[e])},A=(n(21),function(){return Object(l.jsxs)("div",{className:"no-issues",children:[Object(l.jsx)("div",{children:"There are no issues yet..."}),Object(l.jsx)("div",{children:"Use button below to add one."})]})}),B=function(e){var t=e.onDrop,n=e.canDrop,s=e.children,c=function(e){n()&&e.preventDefault()};return Object(l.jsx)(l.Fragment,{children:i.a.Children.map(s,(function(e){return i.a.cloneElement(e,{onDragOver:c,onDrop:t})}))})},V=(n(22),function(){var e=L(),t=I().dispatch,n=Object(s.useState)(null),i=Object(r.a)(n,2),c=i[0],a=i[1];if(e.empty)return Object(l.jsx)(A,{});return Object(l.jsx)("div",{className:"issue-board",children:m.map((function(n){return Object(l.jsx)(B,{canDrop:function(){return function(e){return e!==c.status&&!x(e,c.status)}(n)},onDrop:function(){return function(e){t({type:"EDIT_ISSUE",payload:{issue:c,newValues:{status:e}}})}(n)},children:Object(l.jsx)(d,{status:n,amount:e[n].length,children:e[n].map((function(e){return Object(l.jsx)(E,{onDragStart:function(){return a(e)},children:Object(l.jsx)(_,{issue:e})},e.id)}))})},n)}))})}),G=(n(23),function(e){var t=e.status,n=e.amount,i=void 0===n?0:n,c=e.children,a=Object(s.useState)(!1),o=Object(r.a)(a,2),u=o[0],d=o[1];return Object(l.jsxs)("div",{className:"issue-section ".concat(u?"collapsed":""),children:[Object(l.jsxs)("div",{className:"issue-section_header",children:[Object(l.jsxs)("div",{className:"issue-section_title",children:[t," (",i,")"]}),i>0&&Object(l.jsx)("svg",{className:"issue-section_toggle",onClick:function(){d(!u)},viewBox:"0 0 24 24","aria-hidden":"true",children:Object(l.jsx)("path",{d:"M10 17l5-5-5-5v10z"})})]}),Object(l.jsx)("div",{className:"issue-section_item-wrapper",children:c})]})}),M=(n(24),function(e){var t=I().dispatch,n=e.issue;return Object(l.jsxs)("div",{className:"issue-item",children:[Object(l.jsx)("div",{className:"issue-item_title",onClick:function(){return t({type:"OPEN_DIALOG",payload:n})},children:n.title}),Object(l.jsx)("div",{className:"issue-item_description",children:n.description})]})}),P=(n(25),function(){var e=L();return e.empty?Object(l.jsx)(A,{}):Object(l.jsx)("div",{className:"issue-list",children:m.map((function(t){return Object(l.jsx)(G,{status:t,amount:e[t].length,children:e[t].map((function(e){return Object(l.jsx)(M,{issue:e},e.id)}))},t)}))})}),U=(n(26),function(e){var t=e.onClick;return Object(l.jsx)("div",{className:"fab",onClick:t,children:Object(l.jsx)("svg",{viewBox:"0 0 24 24",children:Object(l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})})}),F=function(){var e=I().dispatch;return Object(l.jsx)(U,{onClick:function(){return e({type:"OPEN_DIALOG"})}})},T=(n(27),function(e){var t=e.title,n=e.confirmation,s=e.children,i=I(),c=i.state,a=i.dispatch;if(!c.dialog.opened)return null;var r=function(){return a({type:"CLOSE_DIALOG"})};return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"dialog-wrapper",onClick:r,children:Object(l.jsxs)("div",{className:"dialog",onClick:function(e){return e.stopPropagation()},children:[Object(l.jsx)("h2",{className:"dialog_title",children:t}),Object(l.jsx)("div",{className:"dialog_content",children:s}),Object(l.jsxs)("div",{className:"dialog_actions",children:[Object(l.jsx)("button",{className:"cancel",onClick:r,children:"Cancel"}),Object(l.jsx)("button",Object(o.a)(Object(o.a)({},n),{},{children:"Confirm"}))]})]})})})}),J=function(e){var t=Object(s.useState)(e),n=Object(r.a)(t,2),i=n[0],c=n[1];return{value:i,setValue:c,reset:function(){return c("")},bind:{value:i,onChange:function(e){c(e.target.value)}}}},z=(n(28),function(){var e=I(),t=e.state,n=e.dispatch,i=t.dialog,c=i.issue,a=i.opened,u=!!c,d=J(""),j=J(""),b=J(v.open),p=Object(s.useState)(!1),O=Object(r.a)(p,2),h=O[0],f=O[1];Object(s.useEffect)((function(){return u&&(d.setValue(c.title),j.setValue(c.description),b.setValue(c.status)),function(){d.reset(),j.reset(),b.setValue(v.open),f(!1)}}),[a]);var m={title:d.value.trim(),description:j.value.trim(),status:b.value},g=Object.keys(m),w=u?g.every((function(e){return m[e]===c[e]})):g.some((function(e){return!m[e]}));return Object(l.jsxs)(T,{title:u?"Edit issue":"Add issue",confirmation:{onClick:function(){n(u?{type:"EDIT_ISSUE",payload:{issue:c,newValues:m}}:{type:"ADD_ISSUE",payload:m}),h?(d.reset(),j.reset()):n({type:"CLOSE_DIALOG"})},disabled:w},children:[Object(l.jsx)("input",Object(o.a)({type:"text",placeholder:"Title"},d.bind)),Object(l.jsx)("textarea",Object(o.a)({placeholder:"Description",rows:"5"},j.bind)),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"status",children:"Status:"}),Object(l.jsx)("select",Object(o.a)(Object(o.a)({name:"status"},b.bind),{},{children:Object.values(v).map((function(e){return Object(l.jsx)("option",{disabled:!!u&&x(e,c.status),value:e,children:e},e)}))}))]}),Object(l.jsxs)("div",{className:"checkbox-wrapper ".concat(u?"hidden":""),children:[Object(l.jsx)("label",{htmlFor:"add-another",children:"Add another?"}),Object(l.jsx)("input",{id:"add-another",type:"checkbox",name:"add-another",checked:h,onChange:function(e){return f(e.target.checked)}})]})]})}),q=function(e){var t=e.view,n=I().state.issues.issues;return Object(s.useEffect)((function(){f.save("issues",JSON.stringify(n))}),[n]),Object(s.useEffect)((function(){f.save("view",t)}),[t]),null},H=function(){var e=Object(s.useState)(f.get("view")||"board"),t=Object(r.a)(e,2),n=t[0],i=t[1];return Object(l.jsxs)(D,{children:[Object(l.jsxs)("header",{children:[Object(l.jsx)("h2",{children:"Issue tracker"}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{className:"board"===n?"active":"",children:Object(l.jsx)("button",{onClick:function(){return i("board")},children:"Board"})}),Object(l.jsx)("li",{className:"list"===n?"active":"",children:Object(l.jsx)("button",{onClick:function(){return i("list")},children:"List"})})]})]}),Object(l.jsxs)("main",{children:["board"===n&&Object(l.jsx)(V,{}),"list"===n&&Object(l.jsx)(P,{}),Object(l.jsx)(F,{}),Object(l.jsx)(z,{})]}),Object(l.jsx)(q,{view:n})]})};a.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(H,{})}),document.getElementById("root"))}],[[29,1,2]]]);
//# sourceMappingURL=main.2f319660.chunk.js.map